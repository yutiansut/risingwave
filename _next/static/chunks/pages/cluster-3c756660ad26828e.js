(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[695],{69850:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cluster",function(){return r(68622)}])},55509:function(e,t,r){"use strict";r.d(t,{OL:function(){return p},X8:function(){return c},xv:function(){return l}});var n=r(47568),i=r(34051),s=r.n(i),a=r(40965),u=r(69333);function c(){return o.apply(this,arguments)}function o(){return(o=(0,n.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.get("/api/metrics/cluster");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return d.apply(this,arguments)}function d(){return(d=(0,n.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.get("/api/clusters/1");case 2:return t=e.sent.map(a.cX.fromJSON),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return h.apply(this,arguments)}function h(){return(h=(0,n.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.get("/api/clusters/2");case 2:return t=e.sent.map(a.cX.fromJSON),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},68622:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return k}});var n=r(47568),i=r(34051),s=r.n(i),a=r(85893),u=r(40639),c=r(53812),o=r(66479),l=r(96486),d=r(9008),p=r.n(d),h=r(67294),f=r(9253),m=r(83323),x=r(3023),v=r(75358),w=r(86108),j=r(5330),y=r(55509);function g(e){var t,r,n=e.workerNodeType,i=e.workerNode;return(0,a.jsx)(h.Fragment,{children:(0,a.jsxs)(u.gC,{alignItems:"start",spacing:1,children:[(0,a.jsxs)(u.Ug,{children:[(0,a.jsx)(u.xu,{w:3,h:3,flex:"none",bgColor:"green.600",rounded:"full"}),(0,a.jsxs)(u.xv,{fontWeight:"medium",fontSize:"xl",textColor:"black",children:[n," #",i.id]})]}),(0,a.jsx)(u.xv,{textColor:"gray.500",m:0,children:"Running"}),(0,a.jsxs)(u.xv,{textColor:"gray.500",m:0,children:[null===(t=i.host)||void 0===t?void 0:t.host,":",null===(r=i.host)||void 0===r?void 0:r.port]})]})})}function b(e){var t=e.job,r=e.instance,n=e.metrics,i=e.isCpuMetrics,s=(0,h.useCallback)((function(){var e=[];if(0===n.length)return[];var t=n.at(-1).timestamp,r=!0,i=!1,s=void 0;try{for(var a,u=(0,l.reverse)((0,l.clone)(n))[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){for(var c=a.value;t-c.timestamp>0;)t-=60,e.push({timestamp:t,value:0});e.push(c),t-=60}}catch(o){i=!0,s=o}finally{try{r||null==u.return||u.return()}finally{if(i)throw s}}for(;e.length<60;)e.push({timestamp:t,value:0}),t-=60;return(0,l.reverse)(e)}),[n]);return(0,a.jsx)(h.Fragment,{children:(0,a.jsxs)(u.gC,{alignItems:"start",spacing:1,children:[(0,a.jsxs)(u.xv,{textColor:"gray.500",mx:3,children:[(0,a.jsx)("b",{children:t})," ",r]}),(0,a.jsx)(f.h,{width:"100%",height:100,children:(0,a.jsxs)(m.T,{data:s(),children:[(0,a.jsx)(x.K,{dataKey:"timestamp",type:"number",domain:["dataMin","dataMax"],hide:!0}),i&&(0,a.jsx)(v.B,{type:"number",domain:[0,1],hide:!0}),(0,a.jsx)(w.u,{isAnimationActive:!1,type:"linear",dataKey:"value",strokeWidth:1,stroke:c.rS.colors.teal[500],fill:c.rS.colors.teal[100]})]})})]})})}function k(){var e=(0,h.useState)([]),t=e[0],r=e[1],i=(0,h.useState)([]),c=i[0],d=i[1],f=(0,h.useState)(),m=f[0],x=f[1],v=(0,o.pm)();(0,h.useEffect)((function(){function e(){return(e=(0,n.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=r,e.next=4,(0,y.xv)();case 4:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=d,e.next=9,(0,y.OL)();case 9:e.t3=e.sent,(0,e.t2)(e.t3),e.next=17;break;case 13:e.prev=13,e.t4=e.catch(0),v({title:"Error Occurred",description:e.t4.toString(),status:"error",duration:5e3,isClosable:!0}),console.error(e.t4);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){}}),[v]),(0,h.useEffect)((function(){function e(){return e=(0,n.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,(0,y.X8)();case 4:return(t=e.sent).cpuData=(0,l.sortBy)(t.cpuData,(function(e){return e.metric.instance})),t.memoryData=(0,l.sortBy)(t.memoryData,(function(e){return e.metric.instance})),x(t),e.next=10,new Promise((function(e){return setTimeout(e,5e3)}));case 10:e.next=17;break;case 12:return e.prev=12,e.t0=e.catch(1),v({title:"Error Occurred",description:e.t0.toString(),status:"error",duration:5e3,isClosable:!0}),console.error(e.t0),e.abrupt("break",19);case 17:e.next=0;break;case 19:case"end":return e.stop()}}),e,null,[[1,12]])}))),e.apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){}}),[v]);var w=(0,a.jsxs)(u.xu,{p:3,children:[(0,a.jsx)(j.Z,{children:"Cluster Overview"}),(0,a.jsxs)(u.rj,{my:3,templateColumns:"repeat(3, 1fr)",gap:6,width:"full",children:[t.map((function(e){return(0,a.jsx)(u.P4,{w:"full",rounded:"xl",bg:"white",shadow:"md",borderWidth:1,p:6,children:(0,a.jsx)(g,{workerNodeType:"Frontend",workerNode:e})},e.id)})),c.map((function(e){return(0,a.jsx)(u.P4,{w:"full",rounded:"xl",bg:"white",shadow:"md",borderWidth:1,p:6,children:(0,a.jsx)(g,{workerNodeType:"Compute",workerNode:e})},e.id)}))]}),(0,a.jsx)(j.Z,{children:"CPU Usage"}),(0,a.jsx)(u.MI,{my:3,columns:3,spacing:6,width:"full",children:m&&m.cpuData.map((function(e){return(0,a.jsx)(u.P4,{w:"full",rounded:"xl",bg:"white",shadow:"md",borderWidth:1,children:(0,a.jsx)(b,{job:e.metric.job,instance:e.metric.instance,metrics:e.sample,isCpuMetrics:!0})},e.metric.instance)}))}),(0,a.jsx)(j.Z,{children:"Memory Usage"}),(0,a.jsx)(u.MI,{my:3,columns:3,spacing:6,width:"full",children:m&&m.memoryData.map((function(e){return(0,a.jsx)(u.P4,{w:"full",rounded:"xl",bg:"white",shadow:"md",borderWidth:1,children:(0,a.jsx)(b,{job:e.metric.job,instance:e.metric.instance,metrics:e.sample,isCpuMetrics:!1})},e.metric.instance)}))})]});return(0,a.jsxs)(h.Fragment,{children:[(0,a.jsx)(p(),{children:(0,a.jsx)("title",{children:"Cluster Overview"})}),w]})}}},function(e){e.O(0,[662,482,932,836,774,888,179],(function(){return t=69850,e(e.s=t);var t}));var t=e.O();_N_E=t}]);