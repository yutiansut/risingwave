(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[980],{92299:function(r,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/await_tree",function(){return n(30832)}])},55509:function(r,e,n){"use strict";n.d(e,{OL:function(){return p},X8:function(){return i},xv:function(){return f}});var t=n(47568),c=n(34051),a=n.n(c),u=n(40965),o=n(69333);function i(){return s.apply(this,arguments)}function s(){return(s=(0,t.Z)(a().mark((function r(){var e;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.Z.get("/api/metrics/cluster");case 2:return e=r.sent,r.abrupt("return",e);case 4:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function f(){return l.apply(this,arguments)}function l(){return(l=(0,t.Z)(a().mark((function r(){var e;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.Z.get("/api/clusters/1");case 2:return e=r.sent.map(u.cX.fromJSON),r.abrupt("return",e);case 4:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function p(){return d.apply(this,arguments)}function d(){return(d=(0,t.Z)(a().mark((function r(){var e;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.Z.get("/api/clusters/2");case 2:return e=r.sent.map(u.cX.fromJSON),r.abrupt("return",e);case 4:case"end":return r.stop()}}),r)})))).apply(this,arguments)}},52783:function(r,e,n){"use strict";n.d(e,{Z:function(){return i}});var t=n(47568),c=n(34051),a=n.n(c),u=n(66479),o=n(67294);function i(r){var e=(0,o.useState)(),n=e[0],c=e[1],i=(0,u.pm)();return(0,o.useEffect)((function(){var e=function(){var e=(0,t.Z)(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r();case 3:n=e.sent,c(n),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),i({title:"Error Occurred",description:e.t0.toString(),status:"error",duration:5e3,isClosable:!0}),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[i,r]),{response:n}}},30832:function(r,e,n){"use strict";n.r(e),n.d(e,{default:function(){return N}});var t=n(47568),c=n(828),a=n(34051),u=n.n(a),o=n(85893),i=n(40639),s=n(83234),f=n(57026),l=n(47741),p=n(19604),d=n(96486),v=n.n(d),h=n(9008),x=n.n(h),m=n(67294),w=n(5662),T=n(5330);var j={fromJSON:function(r){return{actorTraces:Z(r.actorTraces)?Object.entries(r.actorTraces).reduce((function(r,e){var n=(0,c.Z)(e,2),t=n[0],a=n[1];return r[Number(t)]=String(a),r}),{}):{},rpcTraces:Z(r.rpcTraces)?Object.entries(r.rpcTraces).reduce((function(r,e){var n=(0,c.Z)(e,2),t=n[0],a=n[1];return r[t]=String(a),r}),{}):{}}},toJSON:function(r){var e={actorTraces:{}};return r.actorTraces&&Object.entries(r.actorTraces).forEach((function(r){var n=(0,c.Z)(r,2),t=n[0],a=n[1];e.actorTraces[t]=a})),e.rpcTraces={},r.rpcTraces&&Object.entries(r.rpcTraces).forEach((function(r){var n=(0,c.Z)(r,2),t=n[0],a=n[1];e.rpcTraces[t]=a})),e},fromPartial:function(r){var e,n,t={actorTraces:{},rpcTraces:{}};return t.actorTraces=Object.entries(null!==(e=r.actorTraces)&&void 0!==e?e:{}).reduce((function(r,e){var n=(0,c.Z)(e,2),t=n[0],a=n[1];return void 0!==a&&(r[Number(t)]=String(a)),r}),{}),t.rpcTraces=Object.entries(null!==(n=r.rpcTraces)&&void 0!==n?n:{}).reduce((function(r,e){var n=(0,c.Z)(e,2),t=n[0],a=n[1];return void 0!==a&&(r[t]=String(a)),r}),{}),t}};var g="undefined"!==typeof g?g:"undefined"!==typeof self?self:window;function Z(r){return"object"===typeof r&&null!==r}var b=n(69333),O=n(55509),k=n(52783);function N(){var r=(0,k.Z)(O.OL).response,e=(0,m.useState)(),n=e[0],a=e[1],d=(0,m.useState)(""),h=d[0],g=d[1];(0,m.useEffect)((function(){r&&!n&&r.length>0&&a(r[0].id)}),[r,n]);var Z=function(){var r=(0,t.Z)(u().mark((function r(){var e,t,a,o,i;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e="Await-Tree Dump of Compute Node ".concat(n,":"),g(void 0),r.prev=3,r.t0=j,r.next=7,b.Z.get("/api/monitor/await_tree/".concat(n));case 7:r.t1=r.sent,a=r.t0.fromJSON.call(r.t0,r.t1),o=v()(a.actorTraces).entries().map((function(r){var e=(0,c.Z)(r,2),n=e[0],t=e[1];return"[Actor ".concat(n,"]\n").concat(t)})).join("\n"),i=v()(a.rpcTraces).entries().map((function(r){var e=(0,c.Z)(r,2),n=e[0],t=e[1];return"[RPC ".concat(n,"]\n").concat(t)})).join("\n"),t="".concat(e,"\n\n").concat(o,"\n").concat(i),r.next=17;break;case 14:r.prev=14,r.t2=r.catch(3),t="".concat(e,"\n\nError: ").concat(r.t2.message);case 17:g(t);case 18:case"end":return r.stop()}}),r,null,[[3,14]])})));return function(){return r.apply(this,arguments)}}(),N=(0,o.jsxs)(i.kC,{p:3,height:"calc(100vh - 20px)",flexDirection:"column",children:[(0,o.jsx)(T.Z,{children:"Await Tree Dump"}),(0,o.jsxs)(i.kC,{flexDirection:"row",height:"full",width:"full",children:[(0,o.jsx)(i.gC,{mr:3,spacing:3,alignItems:"flex-start",width:200,height:"full",children:(0,o.jsxs)(s.NI,{children:[(0,o.jsx)(s.lX,{children:"Compute Nodes"}),(0,o.jsxs)(i.gC,{children:[(0,o.jsx)(f.Ph,{onChange:function(r){return a(parseInt(r.target.value))},children:r&&r.map((function(r){var e,n;return(0,o.jsxs)("option",{value:r.id,children:["(",r.id,") ",null===(e=r.host)||void 0===e?void 0:e.host,":",null===(n=r.host)||void 0===n?void 0:n.port]},r.id)}))}),(0,o.jsx)(l.zx,{onClick:function(r){return Z()},width:"full",children:"Dump"})]})]})}),(0,o.jsx)(i.xu,{flex:1,height:"full",ml:3,overflowX:"scroll",overflowY:"scroll",children:void 0===h?(0,o.jsx)(w.Z,{}):(0,o.jsx)(p.ZP,{language:"sql",options:{fontSize:13,readOnly:!0,renderWhitespace:"boundary",wordWrap:"on"},defaultValue:'Select a compute node and click "Dump"...',value:h})})]})]});return(0,o.jsxs)(m.Fragment,{children:[(0,o.jsx)(x(),{children:(0,o.jsx)("title",{children:"Await Tree Dump"})}),N]})}}},function(r){r.O(0,[662,422,836,774,888,179],(function(){return e=92299,r(r.s=e);var e}));var e=r.O();_N_E=e}]);